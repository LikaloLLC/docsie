{# Language URL Helper Macros #}

{# Macro to generate language-aware URLs #}
{% macro lang_url(path) -%}
  {%- if lang and lang != 'en' -%}
    {%- if lang == 'ja' -%}
      {{- '/jp' }}{{ path -}}
    {%- else -%}
      {{- '/' }}{{ lang }}{{ path -}}
    {%- endif -%}
  {%- else -%}
    {{- path -}}
  {%- endif -%}
{%- endmacro %}

{# Macro to generate absolute language-aware URLs #}
{% macro abs_lang_url(path) -%}
  {%- if lang and lang != 'en' -%}
    {%- if lang == 'ja' -%}
      {%- if path.startswith('/') -%}
        {{- '/jp' }}{{ path -}}
      {%- else -%}
        {{- '/jp/' }}{{ path -}}
      {%- endif -%}
    {%- else -%}
      {%- if path.startswith('/') -%}
        {{- '/' }}{{ lang }}{{ path -}}
      {%- else -%}
        {{- '/' }}{{ lang }}/{{ path -}}
      {%- endif -%}
    {%- endif -%}
  {%- else -%}
    {%- if path.startswith('/') -%}
      {{- path -}}
    {%- else -%}
      {{- '/' }}{{ path -}}
    {%- endif -%}
  {%- endif -%}
{%- endmacro %}